{% extends 'ku_quora/base.html' %}


{% block content %}


<div class="blog-post">
    <div class="header">
        <div class="profile">
            <a href="{% url 'profile' post.user.id %}"><img src="{{post.user.profile.image.url}}" alt=""></a>
        </div>
        <div>
            <span class="author">{{post.user.username}}</span>
            <span class="time-stamp">{{post.posted_on}}</span>
        </div>
    </div>
    <div class="body">
        <h2 class="title"><a href="{{post.get_absolute_url}}">{{post.title}}</a></h1>
            <span class="tags">
                {% for tag in post.tags.all %}
                <a href="{{tag.get_absolute_url}}">#{{tag}}</a>
                {% endfor %}
            </span>
            <div class="text">
                {{post.body|safe}}
            </div>
            <div class="image">
                <!-- <img src="/media/profile.png" alt=""> -->
            </div>
    </div>

    <h2>Answers:</h2>

    <div class="all-answers">
        {%if not answers.all%}
        <p>No answer yet. Be the first to answer</p>

        {% else %}
        <div class="container">
            
            {%for answer in answers.all %} <br>
            <div class="header">
        <div class="profile">
            <a href="{% url 'profile' answer.user.id %}"><img src="{{answer.user.profile.image.url}}" alt=""></a>
        </div>
        <div>
            <span class="author">{{answer.user.username}}</span>
            <span class="time-stamp">{{answer.time}}</span>
        </div>
    </div>
            {{answer.body}}
            <br>
            <hr>
            <br>
            {%endfor %}
        </div>
        {% endif %}

    </div>

    {% comment %} <div class="add answer">
        <form action='answer/' method="post">
            {% csrf_token %}
            <input type="text area" name="answer" placeholder="Enter your ansnwer here">
            <input type="hidden" name="postSno" value="{{post.sno}}">
            <input type="submit" value="Submit">
        </form>
    </div> {% endcomment %}



    <div class="add-question">
        <div class="visible-part">
            <div class="profile-info">
                <img src="" alt="">
                <span class='username'>{{user.username}}</span>
            </div>
            <div class='text'>Add your own answer here</div>
        </div>
        <div class="overlay">
            <form action="{% url 'answer' %}" method='POST'>
                {% csrf_token %}
                <div class="profile-info">
                    <img src="" alt="">
                    <span class='username'>{{user.username}}</span>
                </div>
                <ul class="thanks">
                    <h2>Thanks for your contribution to KU Quora</h2>
                </ul>
                <ul class="tips">
                    <h3>Tips for adding good answer</h3>
                    <li>Please be sure to answer the question.</li>
                    <li>Double check grammar and spelling</li>
                    <li>Provide details and share your research!</li>
                </ul>
                <input type="text-area" name="answer" id="answer" rows = "16" style="min-width= 90%" placeholder="Enter your ansnwer here" required>
                <input type="hidden" name="postSno" value="{{post.sno}}">
                <input type="submit" value='Add Answer'>
                <button>Cancel</button>
            </form>
        </div>

    </div>





    <div class="footer">
        <div class="buttons">
            <div class="like 
            {% if post.id in liked_posts_ids %}
            liked
        {% endif %}" data-post_id='{{post.id}}' data-url="{% url 'like_post' %}">
                {% csrf_token %}
                <i id='like' class="fas fa-thumbs-up"></i>
                <label for='like' class="count">{{post.likes}}</label>
            </div>
            <div class="dislike 
                {% if post.id in disliked_posts_ids %}
                    disliked
                {% endif %}" data-post_id='{{post.id}}' data-url="{% url 'dislike_post' %}">
                <i id='dislike' class="fas fa-thumbs-down"> </i>
                <label for='dislike' class="count">{{post.dislikes}}</label>
            </div>

            <div class="comment">
                <i class="fas fa-comment"></i>
                <span class="count">0</span>
            </div>
            <div class="options">
                <i class="fas fa-ellipsis-h"></i>
                <ul>
                    {% if post.user == request.user %}
                    <li><a href="">delete</a></li>
                    {% else %}
                    <li><a href="">hide<a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>

{% comment %} {% include 'ku_quora/post_template.html' %} {% endcomment %}
{% endblock %}